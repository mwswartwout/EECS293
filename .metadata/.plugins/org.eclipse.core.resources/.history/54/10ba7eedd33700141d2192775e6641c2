package hw2;

import java.util.ArrayList;
import java.util.Set;

public class Link 
{
	private Set<User> users;
	private ArrayList<Date> dates;
	private Validity status;
	
	public Link()
	{
		status = Validity.INVALID;
	}
	
	public boolean setUsers(Set<User> users)
	{
		if (isValid())
			return false;
		if (users.size() > 2)
			return false;
		else
		{
			this.users = users;
			return true;
		}
	}
	
	public boolean isValid()
	{
		if (status == Validity.VALID)
			return true;
		else
			return false;
	}
	
	public Set<User> getUsers() throws UninitializedObjectException
	{
		if (isValid())
			return users;
		else
			throw new UninitializedObjectException();
	}
	
	public boolean establish(Date date) throws UninitializedObjectException
	{
		if (isActive(date))
			return false;
		else if (date.isBefore(dates.get(dates.size())))
			return false;
		else if (!isValid())
			throw new UninitializedObjectException();
		else 
		{
			date.setActivity(Activity.ACTIVE);
			dates.add(date);
			return true;
		}
	}
	
	public boolean tearDown(Date date) throws UninitializedObjectException
	{
		if (!isActive(date))
			return false;
		else if (date.isBefore(dates.get(dates.size())))
			return false;
		else if (!isValid())
			throw new UninitializedObjectException();
		else
		{
			activity = Activity.INACTIVE;
			dates.add(date);
			return true;
		}
		
	}
	
	public boolean isActive(Date date)
	{
		if (dates.get(lastIndexOf(date)).activity == Activity.ACTIVE)
			return true;
		else
			return false;
	}
	
	public Date firstEvent()
	{
		
	}
	
	public Date nextEvent()
	{
		
	}
	
	public String toString()
	{
		
	}
}
